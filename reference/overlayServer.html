<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add interactive overlays to a Shiny plot — overlayServer • overshiny</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add interactive overlays to a Shiny plot — overlayServer"><meta name="description" content="This function sets up server-side infrastructure to support draggable and
resizable overlays on a plot. This may be useful in applications where users
need to define regions on the plot for further input or processing.
Currently, the overlays are only designed to move along the x axis of the
plot."><meta property="og:description" content="This function sets up server-side infrastructure to support draggable and
resizable overlays on a plot. This may be useful in applications where users
need to define regions on the plot for further input or processing.
Currently, the overlays are only designed to move along the x axis of the
plot."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">overshiny</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/overshiny.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nicholasdavies/overshiny/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add interactive overlays to a Shiny plot</h1>
      <small class="dont-index">Source: <a href="https://github.com/nicholasdavies/overshiny/blob/master/R/server.R" class="external-link"><code>R/server.R</code></a></small>
      <div class="d-none name"><code>overlayServer.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function sets up server-side infrastructure to support draggable and
resizable overlays on a plot. This may be useful in applications where users
need to define regions on the plot for further input or processing.
Currently, the overlays are only designed to move along the x axis of the
plot.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">overlayServer</span><span class="op">(</span></span>
<span>  <span class="va">outputId</span>,</span>
<span>  <span class="va">nrect</span>,</span>
<span>  width <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  snap <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  colours <span class="op">=</span> <span class="va">overlayColours</span>,</span>
<span>  opacity <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  icon <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html" class="external-link">icon</a></span><span class="op">(</span><span class="st">"gear"</span><span class="op">)</span>,</span>
<span>  stagger <span class="op">=</span> <span class="fl">0.045</span>,</span>
<span>  style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  debug <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-outputid">outputId<a class="anchor" aria-label="anchor" href="#arg-outputid"></a></dt>
<dd><p>The ID of the plot output (as used in <code><a href="overlayPlotOutput.html">overlayPlotOutput()</a></code>).</p></dd>


<dt id="arg-nrect">nrect<a class="anchor" aria-label="anchor" href="#arg-nrect"></a></dt>
<dd><p>Number of overlay rectangles to support.</p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>Optional default overlay width in plot coordinates. If <code>NULL</code>
(default), set to 10% of the plot width.</p></dd>


<dt id="arg-snap">snap<a class="anchor" aria-label="anchor" href="#arg-snap"></a></dt>
<dd><p>Function to "snap" overlay coordinates to a grid, or <code>"none"</code>
(default) for no snapping. See details for how to specify the snap
function.</p></dd>


<dt id="arg-colours">colours<a class="anchor" aria-label="anchor" href="#arg-colours"></a></dt>
<dd><p>A function to assign custom colours to the overlays. Should
be a function that takes a single integer (the number of overlays) and
returns colours in hexadecimal notation (e.g. "#FF0000"). Do not provide
opacity here as a fourth channel; use the <code>opacity</code> argument instead.</p></dd>


<dt id="arg-opacity">opacity<a class="anchor" aria-label="anchor" href="#arg-opacity"></a></dt>
<dd><p>Numeric value (0 to 1) indicating overlay transparency.</p></dd>


<dt id="arg-icon">icon<a class="anchor" aria-label="anchor" href="#arg-icon"></a></dt>
<dd><p>A Shiny icon to show the dropdown menu.</p></dd>


<dt id="arg-stagger">stagger<a class="anchor" aria-label="anchor" href="#arg-stagger"></a></dt>
<dd><p>Vertical offset between stacked overlays, as a proportion of
height.</p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>Named list of character vectors with additional CSS styling
attributes for the overlays. If an element is named "background-color"
then this will override the <code>colours</code> and <code>opacity</code> arguments. Vectors
are recycled to length <code>nrect</code>.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>If <code>TRUE</code>, prints changes to input values to the console for
debugging purposes.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="https://rdrr.io/pkg/shiny/man/reactiveValues.html" class="external-link">shiny::reactiveValues()</a></code> object with the following named fields:</p><dl><dt>n</dt>
<dd><p>Number of overlays (read-only).</p></dd>

<dt>active</dt>
<dd><p>Logical vector of length <code>n</code>; indicates which overlays are active.</p></dd>

<dt>show</dt>
<dd><p>Logical vector; controls whether overlays are visible.</p></dd>

<dt>editing</dt>
<dd><p>Index of the overlay currently being edited via the
dropdown menu, if any; <code>NA</code> otherwise (read-only).</p></dd>

<dt>last</dt>
<dd><p>Index of the most recently added overlay (read-only).</p></dd>

<dt>snap</dt>
<dd><p>Coordinate snapping function.</p></dd>

<dt>px, pw</dt>
<dd><p>Numeric vector; overlay x-position and width in pixels (see note).</p></dd>

<dt>py, ph</dt>
<dd><p>Numeric vector; overlay y-position and height in pixels (read-only).</p></dd>

<dt>cx0, cx1</dt>
<dd><p>Numeric vector; overlay x-bounds in plot coordinates (see note).</p></dd>

<dt>label</dt>
<dd><p>Character vector of labels shown at the top of each overlay.</p></dd>

<dt>outputId</dt>
<dd><p>The output ID of the plot display area (read-only).</p></dd>

<dt>bound_cx, bound_cw</dt>
<dd><p>x-position and width of the bounding area in plot coordinates (read-only).</p></dd>

<dt>bound_px, bound_pw</dt>
<dd><p>x-position and width of the bounding area in pixels (read-only).</p></dd>

<dt>bound_py, bound_ph</dt>
<dd><p>y-position and height of the bounding area in pixels (read-only).</p></dd>

<dt>stagger</dt>
<dd><p>Amount of vertical staggering, as proportion of height.</p></dd>

<dt>style</dt>
<dd><p>Named list of character vectors; additional styling for rectangular overlays.</p></dd>

<dt>update_cx(i)</dt>
<dd><p>Function to update <code>cx0</code>/<code>cx1</code> from <code>px</code>/<code>pw</code> for overlays <code>i</code> (see note).</p></dd>

<dt>update_px(i)</dt>
<dd><p>Function to update <code>px</code>/<code>pw</code> from <code>cx0</code>/<code>cx1</code> for overlays <code>i</code> (see note).</p></dd>


</dl><p>Note: Fields marked "read-only" above should not be changed. Other fields can
be changed in your reactive code and this will modify the overlays and their
properties. The fields <code>px</code> and <code>pw</code> which specify the pixel coordinates of
each overlay can be modified, but any modifications should be placed in a
<code><a href="https://rdrr.io/pkg/shiny/man/isolate.html" class="external-link">shiny::isolate()</a></code> call, with a call to <code>ov$update_cx(i)</code> at the end to
update <code>cx0</code> and <code>cx1</code> and apply snapping. Similarly, the fields
<code>cx0</code> and <code>cx1</code> which specify the plot coordinates of each overlay can be
modified, but modifications should be placed in a <code><a href="https://rdrr.io/pkg/shiny/man/isolate.html" class="external-link">shiny::isolate()</a></code> call
with a call to <code>ov$update_px(i)</code> at the end to update <code>px</code> and <code>pw</code>
and apply snapping. The <code>i</code> parameter to these functions can be left out
to apply changes to all overlays, or you can pass in the indices of just
the overlay(s) to be updated.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Call this function once from your server code to initialise a set of overlay
rectangles for a specific plot. It creates reactive handlers for move,
resize, and dropdown menu actions, and allows adding new overlays by
dragging an <code><a href="overlayToken.html">overlayToken()</a></code> onto the plot. The function returns a
<code><a href="https://rdrr.io/pkg/shiny/man/reactiveValues.html" class="external-link">shiny::reactiveValues()</a></code> object which you should keep for further use; in
the examples and documentation, this object is typically called <code>ov</code>.</p>
<p>This function also defines a dynamic output UI slot with ID
<code>paste0(outputId, "_menu")</code>, which can be rendered using <code><a href="https://rdrr.io/pkg/shiny/man/renderUI.html" class="external-link">shiny::renderUI()</a></code>.
When a user clicks the overlay's dropdown icon, this menu becomes visible
and can be populated with inputs for editing overlay-specific settings, e.g.
labels or numeric parameters tied to that overlay.</p>
<p>If you provide a coordinate snapping function (<code>snap</code> argument), it should
have the signature <code>function(ov, i)</code> where <code>ov</code> is the
<code><a href="https://rdrr.io/pkg/shiny/man/reactiveValues.html" class="external-link">shiny::reactiveValues()</a></code> object defining the overlays and their settings,
and <code>i</code> is the set of indices for the rectangles to be updated. When the
position of any of the overlays is changed, the snapping function will be
applied. In this function, you should make sure that all <code>ov$cx0[i]</code> and
<code>ov$cx1[i]</code> are within the coordinate bounds defined by the plot, i.e.
constrained by <code>ov$bound_cx</code> and <code>ov$bound_cw</code>, when the function returns.
This means, for example, if you are "rounding down" <code>ov$cx0[i]</code> to some
nearest multiple of a number, you should make sure it doesn't become less
than <code>ov$bound_cx</code>. Finally, the snapping function will get triggered when
the x axis range of the plot changes, so it may be a good idea to provide
one if the user might place an overlay onto the plot, but then change the x
axis range of the plot such that the overlay is no longer visible. You can
detect this by verifying whether the overlay rectangles are "out of bounds"
at the top of your snapping function. See example below.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="overlayPlotOutput.html">overlayPlotOutput()</a></code>, <code><a href="overlayBounds.html">overlayBounds()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example of a valid snapping function: snap to nearest round number and</span></span></span>
<span class="r-in"><span><span class="co"># make sure the overlay is at least 2 units wide.</span></span></span>
<span class="r-in"><span><span class="va">mysnap</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ov</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># remove any "out of bounds" overlays</span></span></span>
<span class="r-in"><span>    <span class="va">oob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">i</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>        <span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">cx0</span> <span class="op">&lt;</span> <span class="va">ov</span><span class="op">$</span><span class="va">bound_cx</span> <span class="op">|</span> <span class="va">ov</span><span class="op">$</span><span class="va">cx1</span> <span class="op">&gt;</span> <span class="va">ov</span><span class="op">$</span><span class="va">bound_cx</span> <span class="op">+</span> <span class="va">ov</span><span class="op">$</span><span class="va">bound_cw</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">ov</span><span class="op">$</span><span class="va">active</span><span class="op">[</span><span class="va">oob</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># adjust position and with</span></span></span>
<span class="r-in"><span>    <span class="va">widths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">cx1</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">-</span> <span class="va">ov</span><span class="op">$</span><span class="va">cx0</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">ov</span><span class="op">$</span><span class="va">cx0</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">bound_cx</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">bound_cx</span> <span class="op">+</span> <span class="va">ov</span><span class="op">$</span><span class="va">bound_cw</span><span class="op">)</span> <span class="op">-</span> <span class="va">widths</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">cx0</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">ov</span><span class="op">$</span><span class="va">cx1</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">bound_cx</span> <span class="op">+</span> <span class="va">ov</span><span class="op">$</span><span class="va">bound_cw</span><span class="op">)</span>, <span class="va">ov</span><span class="op">$</span><span class="va">cx0</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">+</span> <span class="va">widths</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="useOverlay.html">useOverlay</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="overlayPlotOutput.html">overlayPlotOutput</a></span><span class="op">(</span><span class="st">"my_plot"</span>, <span class="fl">640</span>, <span class="fl">480</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="overlayToken.html">overlayToken</a></span><span class="op">(</span><span class="st">"add"</span>, <span class="st">"Raise"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># further UI elements here . . .</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">ov</span> <span class="op">&lt;-</span> <span class="fu">overlayServer</span><span class="op">(</span><span class="st">"my_plot"</span>, <span class="fl">4</span>, <span class="fl">1</span>, snap <span class="op">=</span> <span class="va">mysnap</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">output</span><span class="op">$</span><span class="va">my_plot_menu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderUI.html" class="external-link">renderUI</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">editing</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="st">"label_input"</span>, <span class="st">"Overlay label"</span>, value <span class="op">=</span> <span class="va">ov</span><span class="op">$</span><span class="va">label</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">label_input</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">editing</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="va">ov</span><span class="op">$</span><span class="va">label</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">label_input</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">output</span><span class="op">$</span><span class="va">my_plot</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span>, length.out <span class="op">=</span> <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="va">df</span><span class="op">$</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ov</span><span class="op">$</span><span class="va">active</span> <span class="op">*</span> <span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span> <span class="va">ov</span><span class="op">$</span><span class="va">cx0</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">x</span> <span class="op">&lt;</span> <span class="va">ov</span><span class="op">$</span><span class="va">cx1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">df</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="overlayBounds.html">overlayBounds</a></span><span class="op">(</span><span class="va">ov</span>, <span class="st">"base"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># further server code here . . .</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nick Davies.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

